/*!
 * jQuery UI Slider @VERSION
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./mouse","../keycode","../version","../widget"],a)}else{a(jQuery)}}(function(a){return a.widget("ui.slider",a.ui.mouse,{version:"@VERSION",widgetEventPrefix:"slide",options:{animate:false,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content");this._refresh();this._animateOff=false},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var e,b,c=this.options,g=this.element.find(".ui-slider-handle"),f="<span tabindex='0'></span>",d=[];b=(c.values&&c.values.length)||1;if(g.length>b){g.slice(b).remove();g=g.slice(0,b)}for(e=g.length;e<b;e++){d.push(f)}this.handles=g.add(a(d.join("")).appendTo(this.element));this._addClass(this.handles,"ui-slider-handle","ui-state-default");this.handle=this.handles.eq(0);this.handles.each(function(h){a(this).data("ui-slider-handle-index",h).attr("tabIndex",0)})},_createRange:function(){var b=this.options;if(b.range){if(b.range===true){if(!b.values){b.values=[this._valueMin(),this._valueMin()]}else{if(b.values.length&&b.values.length!==2){b.values=[b.values[0],b.values[0]]}else{if(a.isArray(b.values)){b.values=b.values.slice(0)}}}}if(!this.range||!this.range.length){this.range=a("<div>").appendTo(this.element);this._addClass(this.range,"ui-slider-range")}else{this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max");this.range.css({left:"",bottom:""})}if(b.range==="min"||b.range==="max"){this._addClass(this.range,"ui-slider-range-"+b.range)}}else{if(this.range){this.range.remove()}this.range=null}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();if(this.range){this.range.remove()}this._mouseDestroy()},_mouseCapture:function(d){var h,k,c,f,j,l,g,b,i=this,e=this.options;if(e.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();h={x:d.pageX,y:d.pageY};k=this._normValueFromMouse(h);c=this._valueMax()-this._valueMin()+1;this.handles.each(function(m){var n=Math.abs(k-i.values(m));if((c>n)||(c===n&&(m===i._lastChangedValue||i.values(m)===e.min))){c=n;f=a(this);j=m}});l=this._start(d,j);if(l===false){return false}this._mouseSliding=true;this._handleIndex=j;this._addClass(f,null,"ui-state-active");f.trigger("focus");g=f.offset();b=!a(d.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=b?{left:0,top:0}:{left:d.pageX-g.left-(f.width()/2),top:d.pageY-g.top-(f.height()/2)-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(d,j,k)}this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(d){var b={x:d.pageX,y:d.pageY},c=this._normValueFromMouse(b);this._slide(d,this._handleIndex,c);return false},_mouseStop:function(b){this._removeClass(this.handles,null,"ui-state-active");this._mouseSliding=false;this._stop(b,this._handleIndex);this._change(b,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal"},_normValueFromMouse:function(c){var b,f,e,d,g;if(this.orientation==="horizontal"){b=this.elementSize.width;f=c.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{b=this.elementSize.height;f=c.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}e=(f/b);if(e>1){e=1}if(e<0){e=0}if(this.orientation==="vertical"){e=1-e}d=this._valueMax()-this._valueMin();g=this._valueMin()+e*d;return this._trimAlignValue(g)},_uiHash:function(d,e,b){var c={handle:this.handles[d],handleIndex:d,value:e!==undefined?e:this.value()};if(this._hasMultipleValues()){c.value=e!==undefined?e:this.values(d);c.values=b||this.values()}return c},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(c,b){return this._trigger("start",c,this._uiHash(b))},_slide:function(g,e,d){var h,b,f=this.value(),c=this.values();if(this._hasMultipleValues()){b=this.values(e?0:1);f=this.values(e);if(this.options.values.length===2&&this.options.range===true){d=e===0?Math.min(b,d):Math.max(b,d)}c[e]=d}if(d===f){return}h=this._trigger("slide",g,this._uiHash(e,d,c));if(h===false){return}if(this._hasMultipleValues()){this.values(e,d)}else{this.value(d)}},_stop:function(c,b){this._trigger("stop",c,this._uiHash(b))},_change:function(c,b){if(!this._keySliding&&!this._mouseSliding){this._lastChangedValue=b;this._trigger("change",c,this._uiHash(b))}},value:function(b){if(arguments.length){this.options.value=this._trimAlignValue(b);this._refreshValue();this._change(null,0);return}return this._value()},values:function(c,f){var e,b,d;if(arguments.length>1){this.options.values[c]=this._trimAlignValue(f);this._refreshValue();this._change(null,c);return}if(arguments.length){if(a.isArray(arguments[0])){e=this.options.values;b=arguments[0];for(d=0;d<e.length;d+=1){e[d]=this._trimAlignValue(b[d]);this._change(null,d)}this._refreshValue()}else{if(this._hasMultipleValues()){return this._values(c)}else{return this.value()}}}else{return this._values()}},_setOption:function(c,d){var b,e=0;if(c==="range"&&this.options.range===true){if(d==="min"){this.options.value=this._values(0);this.options.values=null}else{if(d==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null}}}if(a.isArray(this.options.values)){e=this.options.values.length}this._super(c,d);switch(c){case"orientation":this._detectOrientation();this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation);this._refreshValue();if(this.options.range){this._refreshRange(d)}this.handles.css(d==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(b=e-1;b>=0;b--){this._change(null,b)}this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break}},_setOptionDisabled:function(b){this._super(b);this._toggleClass(null,"ui-state-disabled",!!b)},_value:function(){var b=this.options.value;b=this._trimAlignValue(b);return b},_values:function(b){var e,d,c;if(arguments.length){e=this.options.values[b];e=this._trimAlignValue(e);return e}else{if(this._hasMultipleValues()){d=this.options.values.slice();for(c=0;c<d.length;c+=1){d[c]=this._trimAlignValue(d[c])}return d}else{return[]}}},_trimAlignValue:function(e){if(e<=this._valueMin()){return this._valueMin()}if(e>=this._valueMax()){return this._valueMax()}var b=(this.options.step>0)?this.options.step:1,d=(e-this._valueMin())%b,c=e-d;if(Math.abs(d)*2>=b){c+=(d>0)?b:(-b)}return parseFloat(c.toFixed(5))},_calculateNewMax:function(){var b=this.options.max,c=this._valueMin(),d=this.options.step,e=Math.round((b-c)/d)*d;b=e+c;if(b>this.options.max){b-=d}this.max=parseFloat(b.toFixed(this._precision()))},_precision:function(){var b=this._precisionOf(this.options.step);if(this.options.min!==null){b=Math.max(b,this._precisionOf(this.options.min))}return b},_precisionOf:function(c){var d=c.toString(),b=d.indexOf(".");return b===-1?0:d.length-b-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(b){if(b==="vertical"){this.range.css({width:"",left:""})}if(b==="horizontal"){this.range.css({height:"",bottom:""})}},_refreshValue:function(){var g,f,j,h,k,e=this.options.range,d=this.options,i=this,c=(!this._animateOff)?d.animate:false,b={};if(this._hasMultipleValues()){this.handles.each(function(l){f=(i.values(l)-i._valueMin())/(i._valueMax()-i._valueMin())*100;b[i.orientation==="horizontal"?"left":"bottom"]=f+"%";a(this).stop(1,1)[c?"animate":"css"](b,d.animate);if(i.options.range===true){if(i.orientation==="horizontal"){if(l===0){i.range.stop(1,1)[c?"animate":"css"]({left:f+"%"},d.animate)}if(l===1){i.range[c?"animate":"css"]({width:(f-g)+"%"},{queue:false,duration:d.animate})}}else{if(l===0){i.range.stop(1,1)[c?"animate":"css"]({bottom:(f)+"%"},d.animate)}if(l===1){i.range[c?"animate":"css"]({height:(f-g)+"%"},{queue:false,duration:d.animate})}}}g=f})}else{j=this.value();h=this._valueMin();k=this._valueMax();f=(k!==h)?(j-h)/(k-h)*100:0;b[this.orientation==="horizontal"?"left":"bottom"]=f+"%";this.handle.stop(1,1)[c?"animate":"css"](b,d.animate);if(e==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[c?"animate":"css"]({width:f+"%"},d.animate)}if(e==="max"&&this.orientation==="horizontal"){this.range.stop(1,1)[c?"animate":"css"]({width:(100-f)+"%"},d.animate)}if(e==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[c?"animate":"css"]({height:f+"%"},d.animate)}if(e==="max"&&this.orientation==="vertical"){this.range.stop(1,1)[c?"animate":"css"]({height:(100-f)+"%"},d.animate)}}},_handleEvents:{keydown:function(f){var g,d,c,e,b=a(f.target).data("ui-slider-handle-index");switch(f.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:f.preventDefault();if(!this._keySliding){this._keySliding=true;this._addClass(a(f.target),null,"ui-state-active");g=this._start(f,b);if(g===false){return}}break}e=this.options.step;if(this._hasMultipleValues()){d=c=this.values(b)}else{d=c=this.value()}switch(f.keyCode){case a.ui.keyCode.HOME:c=this._valueMin();break;case a.ui.keyCode.END:c=this._valueMax();break;case a.ui.keyCode.PAGE_UP:c=this._trimAlignValue(d+((this._valueMax()-this._valueMin())/this.numPages));break;case a.ui.keyCode.PAGE_DOWN:c=this._trimAlignValue(d-((this._valueMax()-this._valueMin())/this.numPages));break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(d===this._valueMax()){return}c=this._trimAlignValue(d+e);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(d===this._valueMin()){return}c=this._trimAlignValue(d-e);break}this._slide(f,b,c)},keyup:function(c){var b=a(c.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(c,b);this._change(c,b);this._removeClass(a(c.target),null,"ui-state-active")}}}})}));