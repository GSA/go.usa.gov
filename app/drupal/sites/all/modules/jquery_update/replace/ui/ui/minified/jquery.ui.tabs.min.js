/*!
 * jQuery UI Tabs @VERSION
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","../escape-selector","../keycode","../safe-active-element","../unique-id","../version","../widget"],a)}else{a(jQuery)}}(function(a){a.widget("ui.tabs",{version:"@VERSION",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(function(){var b=/#.*$/;return function(d){var f,e;f=d.href.replace(b,"");e=location.href.replace(b,"");try{f=decodeURIComponent(f)}catch(c){}try{e=decodeURIComponent(e)}catch(c){}return d.hash.length>1&&f===e}})(),_create:function(){var c=this,b=this.options;this.running=false;this._addClass("ui-tabs","ui-widget ui-widget-content");this._toggleClass("ui-tabs-collapsible",null,b.collapsible);this._processTabs();b.active=this._initialActive();if(a.isArray(b.disabled)){b.disabled=a.unique(b.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(d){return c.tabs.index(d)}))).sort()}if(this.options.active!==false&&this.anchors.length){this.active=this._findActive(b.active)}else{this.active=a()}this._refresh();if(this.active.length){this.load(b.active)}},_initialActive:function(){var c=this.options.active,b=this.options.collapsible,d=location.hash.substring(1);if(c===null){if(d){this.tabs.each(function(e,f){if(a(f).attr("aria-controls")===d){c=e;return false}})}if(c===null){c=this.tabs.index(this.tabs.filter(".ui-tabs-active"))}if(c===null||c===-1){c=this.tabs.length?0:false}}if(c!==false){c=this.tabs.index(this.tabs.eq(c));if(c===-1){c=b?false:0}}if(!b&&c===false&&this.anchors.length){c=0}return c},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?a():this._getPanelForTab(this.active)}},_tabKeydown:function(d){var c=a(a.ui.safeActiveElement(this.document[0])).closest("li"),b=this.tabs.index(c),e=true;if(this._handlePageNav(d)){return}switch(d.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:b++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=false;b--;break;case a.ui.keyCode.END:b=this.anchors.length-1;break;case a.ui.keyCode.HOME:b=0;break;case a.ui.keyCode.SPACE:d.preventDefault();clearTimeout(this.activating);this._activate(b);return;case a.ui.keyCode.ENTER:d.preventDefault();clearTimeout(this.activating);this._activate(b===this.options.active?false:b);return;default:return}d.preventDefault();clearTimeout(this.activating);b=this._focusNextTab(b,e);if(!d.ctrlKey&&!d.metaKey){c.attr("aria-selected","false");this.tabs.eq(b).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",b)},this.delay)}},_panelKeydown:function(b){if(this._handlePageNav(b)){return}if(b.ctrlKey&&b.keyCode===a.ui.keyCode.UP){b.preventDefault();this.active.trigger("focus")}},_handlePageNav:function(b){if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true}if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true}},_findNextTab:function(c,d){var b=this.tabs.length-1;function e(){if(c>b){c=0}if(c<0){c=b}return c}while(a.inArray(e(),this.options.disabled)!==-1){c=d?c+1:c-1}return c},_focusNextTab:function(b,c){b=this._findNextTab(b,c);this.tabs.eq(b).trigger("focus");return b},_setOption:function(b,c){if(b==="active"){this._activate(c);return}this._super(b,c);if(b==="collapsible"){this._toggleClass("ui-tabs-collapsible",null,c);if(!c&&this.options.active===false){this._activate(0)}}if(b==="event"){this._setupEvents(c)}if(b==="heightStyle"){this._setupHeightStyle(c)}},_sanitizeSelector:function(b){return b?b.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var c=this.options,b=this.tablist.children(":has(a[href])");c.disabled=a.map(b.filter(".ui-state-disabled"),function(d){return b.index(d)});this._processTabs();if(c.active===false||!this.anchors.length){c.active=false;this.active=a()}else{if(this.active.length&&!a.contains(this.tablist[0],this.active[0])){if(this.tabs.length===c.disabled.length){c.active=false;this.active=a()}else{this._activate(this._findNextTab(Math.max(0,c.active-1),false))}}else{c.active=this.tabs.index(this.active)}}this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});if(!this.active.length){this.tabs.eq(0).attr("tabIndex",0)}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});this._addClass(this.active,"ui-tabs-active","ui-state-active");this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})}},_processTabs:function(){var d=this,e=this.tabs,c=this.anchors,b=this.panels;this.tablist=this._getList().attr("role","tablist");this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header");this.tablist.on("mousedown"+this.eventNamespace,"> li",function(f){if(a(this).is(".ui-state-disabled")){f.preventDefault()}}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){if(a(this).closest("li").is(".ui-state-disabled")){this.blur()}});this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1});this._addClass(this.tabs,"ui-tabs-tab","ui-state-default");this.anchors=this.tabs.map(function(){return a("a",this)[0]}).attr({role:"presentation",tabIndex:-1});this._addClass(this.anchors,"ui-tabs-anchor");this.panels=a();this.anchors.each(function(l,j){var f,g,k,h=a(j).uniqueId().attr("id"),m=a(j).closest("li"),n=m.attr("aria-controls");if(d._isLocal(j)){f=j.hash;k=f.substring(1);g=d.element.find(d._sanitizeSelector(f))}else{k=m.attr("aria-controls")||a({}).uniqueId()[0].id;f="#"+k;g=d.element.find(f);if(!g.length){g=d._createPanel(k);g.insertAfter(d.panels[l-1]||d.tablist)}g.attr("aria-live","polite")}if(g.length){d.panels=d.panels.add(g)}if(n){m.data("ui-tabs-aria-controls",n)}m.attr({"aria-controls":k,"aria-labelledby":h});g.attr("aria-labelledby",h)});this.panels.attr("role","tabpanel");this._addClass(this.panels,"ui-tabs-panel","ui-widget-content");if(e){this._off(e.not(this.tabs));this._off(c.not(this.anchors));this._off(b.not(this.panels))}},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).data("ui-tabs-destroy",true)},_setOptionDisabled:function(e){var d,b,c;if(a.isArray(e)){if(!e.length){e=false}else{if(e.length===this.anchors.length){e=true}}}for(c=0;(b=this.tabs[c]);c++){d=a(b);if(e===true||a.inArray(c,e)!==-1){d.attr("aria-disabled","true");this._addClass(d,null,"ui-state-disabled")}else{d.removeAttr("aria-disabled");this._removeClass(d,null,"ui-state-disabled")}}this.options.disabled=e;this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,e===true)},_setupEvents:function(c){var b={};if(c){a.each(c.split(" "),function(e,d){b[d]="_eventHandler"})}this._off(this.anchors.add(this.tabs).add(this.panels));this._on(true,this.anchors,{click:function(d){d.preventDefault()}});this._on(this.anchors,b);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(b){var d,c=this.element.parent();if(b==="fill"){d=c.height();d-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var f=a(this),e=f.css("position");if(e==="absolute"||e==="fixed"){return}d-=f.outerHeight(true)});this.element.children().not(this.panels).each(function(){d-=a(this).outerHeight(true)});this.panels.each(function(){a(this).height(Math.max(0,d-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else{if(b==="auto"){d=0;this.panels.each(function(){d=Math.max(d,a(this).height("").height())}).height(d)}}},_eventHandler:function(b){var k=this.options,f=this.active,g=a(b.currentTarget),e=g.closest("li"),i=e[0]===f[0],c=i&&k.collapsible,d=c?a():this._getPanelForTab(e),h=!f.length?a():this._getPanelForTab(f),j={oldTab:f,oldPanel:h,newTab:c?a():e,newPanel:d};b.preventDefault();if(e.hasClass("ui-state-disabled")||e.hasClass("ui-tabs-loading")||this.running||(i&&!k.collapsible)||(this._trigger("beforeActivate",b,j)===false)){return}k.active=c?false:this.tabs.index(e);this.active=i?a():e;if(this.xhr){this.xhr.abort()}if(!h.length&&!d.length){a.error("jQuery UI Tabs: Mismatching fragment identifier.")}if(d.length){this.load(this.tabs.index(e),b)}this._toggle(b,j)},_toggle:function(h,g){var f=this,b=g.newPanel,e=g.oldPanel;this.running=true;function d(){f.running=false;f._trigger("activate",h,g)}function c(){f._addClass(g.newTab.closest("li"),"ui-tabs-active","ui-state-active");if(b.length&&f.options.show){f._show(b,f.options.show,d)}else{b.show();d()}}if(e.length&&this.options.hide){this._hide(e,this.options.hide,function(){f._removeClass(g.oldTab.closest("li"),"ui-tabs-active","ui-state-active");c()})}else{this._removeClass(g.oldTab.closest("li"),"ui-tabs-active","ui-state-active");e.hide();c()}e.attr("aria-hidden","true");g.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});if(b.length&&e.length){g.oldTab.attr("tabIndex",-1)}else{if(b.length){this.tabs.filter(function(){return a(this).attr("tabIndex")===0}).attr("tabIndex",-1)}}b.attr("aria-hidden","false");g.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(c){var b,d=this._findActive(c);if(d[0]===this.active[0]){return}if(!d.length){d=this.active}b=d.find(".ui-tabs-anchor")[0];this._eventHandler({target:b,currentTarget:b,preventDefault:a.noop})},_findActive:function(b){return b===false?a():this.tabs.eq(b)},_getIndex:function(b){if(typeof b==="string"){b=this.anchors.index(this.anchors.filter("[href$='"+a.ui.escapeSelector(b)+"']"))}return b},_destroy:function(){if(this.xhr){this.xhr.abort()}this.tablist.removeAttr("role").off(this.eventNamespace);this.anchors.removeAttr("role tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){if(a.data(this,"ui-tabs-destroy")){a(this).remove()}else{a(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}});this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");if(c){b.attr("aria-controls",c).removeData("ui-tabs-aria-controls")}else{b.removeAttr("aria-controls")}});this.panels.show();if(this.options.heightStyle!=="content"){this.panels.css("height","")}},enable:function(b){var c=this.options.disabled;if(c===false){return}if(b===undefined){c=false}else{b=this._getIndex(b);if(a.isArray(c)){c=a.map(c,function(d){return d!==b?d:null})}else{c=a.map(this.tabs,function(d,e){return e!==b?e:null})}}this._setOptionDisabled(c)},disable:function(b){var c=this.options.disabled;if(c===true){return}if(b===undefined){c=true}else{b=this._getIndex(b);if(a.inArray(b,c)!==-1){return}if(a.isArray(c)){c=a.merge([b],c).sort()}else{c=[b]}}this._setOptionDisabled(c)},load:function(e,i){e=this._getIndex(e);var h=this,f=this.tabs.eq(e),d=f.find(".ui-tabs-anchor"),c=this._getPanelForTab(f),g={tab:f,panel:c},b=function(k,j){if(j==="abort"){h.panels.stop(false,true)}h._removeClass(f,"ui-tabs-loading");c.removeAttr("aria-busy");if(k===h.xhr){delete h.xhr}};if(this._isLocal(d[0])){return}this.xhr=a.ajax(this._ajaxSettings(d,i,g));if(this.xhr&&this.xhr.statusText!=="canceled"){this._addClass(f,"ui-tabs-loading");c.attr("aria-busy","true");this.xhr.done(function(k,j,l){setTimeout(function(){c.html(k);h._trigger("load",i,g);b(l,j)},1)}).fail(function(k,j){setTimeout(function(){b(k,j)},1)})}},_ajaxSettings:function(b,e,d){var c=this;return{url:b.attr("href").replace(/#.*$/,""),beforeSend:function(g,f){return c._trigger("beforeLoad",e,a.extend({jqXHR:g,ajaxSettings:f},d))}}},_getPanelForTab:function(b){var c=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}});if(a.uiBackCompat!==false){a.widget("ui.tabs",a.ui.tabs,{_processTabs:function(){this._superApply(arguments);this._addClass(this.tabs,"ui-tab")}})}return a.ui.tabs}));