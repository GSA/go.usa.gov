/*!
 * jQuery UI Accordion @VERSION
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","../version","../keycode","../unique-id","../widget"],a)}else{a(jQuery)}}(function(a){return a.widget("ui.accordion",{version:"@VERSION",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:false,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var b=this.options;this.prevShow=this.prevHide=a();this._addClass("ui-accordion","ui-widget ui-helper-reset");this.element.attr("role","tablist");if(!b.collapsible&&(b.active===false||b.active==null)){b.active=0}this._processPanels();if(b.active<0){b.active+=this.headers.length}this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:!this.active.length?a():this.active.next()}},_createIcons:function(){var d,c,b=this.options.icons;if(b){d=a("<span>");this._addClass(d,"ui-accordion-header-icon","ui-icon "+b.header);d.prependTo(this.headers);c=this.active.children(".ui-accordion-header-icon");this._removeClass(c,b.header)._addClass(c,null,b.activeHeader)._addClass(this.headers,"ui-accordion-icons")}},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons");this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var b;this.element.removeAttr("role");this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId();this._destroyIcons();b=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId();if(this.options.heightStyle!=="content"){b.css("height","")}},_setOption:function(b,c){if(b==="active"){this._activate(c);return}if(b==="event"){if(this.options.event){this._off(this.headers,this.options.event)}this._setupEvents(c)}this._super(b,c);if(b==="collapsible"&&!c&&this.options.active===false){this._activate(0)}if(b==="icons"){this._destroyIcons();if(c){this._createIcons()}}},_setOptionDisabled:function(b){this._super(b);this.element.attr("aria-disabled",b);this._toggleClass(null,"ui-state-disabled",!!b);this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!b)},_keydown:function(e){if(e.altKey||e.ctrlKey){return}var f=a.ui.keyCode,d=this.headers.length,b=this.headers.index(e.target),c=false;switch(e.keyCode){case f.RIGHT:case f.DOWN:c=this.headers[(b+1)%d];break;case f.LEFT:case f.UP:c=this.headers[(b-1+d)%d];break;case f.SPACE:case f.ENTER:this._eventHandler(e);break;case f.HOME:c=this.headers[0];break;case f.END:c=this.headers[d-1];break}if(c){a(e.target).attr("tabIndex",-1);a(c).attr("tabIndex",0);a(c).trigger("focus");e.preventDefault()}},_panelKeyDown:function(b){if(b.keyCode===a.ui.keyCode.UP&&b.ctrlKey){a(b.currentTarget).prev().trigger("focus")}},refresh:function(){var b=this.options;this._processPanels();if((b.active===false&&b.collapsible===true)||!this.headers.length){b.active=false;this.active=a()}else{if(b.active===false){this._activate(0)}else{if(this.active.length&&!a.contains(this.element[0],this.active[0])){if(this.headers.length===this.headers.find(".ui-state-disabled").length){b.active=false;this.active=a()}else{this._activate(Math.max(0,b.active-1))}}else{b.active=this.headers.index(this.active)}}}this._destroyIcons();this._refresh()},_processPanels:function(){var c=this.headers,b=this.panels;this.headers=this.element.find(this.options.header);this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default");this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide();this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content");if(b){this._off(c.not(this.headers));this._off(b.not(this.panels))}},_refresh:function(){var e,c=this.options,b=c.heightStyle,d=this.element.parent();this.active=this._findActive(c.active);this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed");this._addClass(this.active.next(),"ui-accordion-content-active");this.active.next().show();this.headers.attr("role","tab").each(function(){var i=a(this),h=i.uniqueId().attr("id"),f=i.next(),g=f.uniqueId().attr("id");i.attr("aria-controls",g);f.attr("aria-labelledby",h)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex",0)}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"})}this._createIcons();this._setupEvents(c.event);if(b==="fill"){e=d.height();this.element.siblings(":visible").each(function(){var g=a(this),f=g.css("position");if(f==="absolute"||f==="fixed"){return}e-=g.outerHeight(true)});this.headers.each(function(){e-=a(this).outerHeight(true)});this.headers.next().each(function(){a(this).height(Math.max(0,e-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else{if(b==="auto"){e=0;this.headers.next().each(function(){var f=a(this).is(":visible");if(!f){a(this).show()}e=Math.max(e,a(this).css("height","").height());if(!f){a(this).hide()}}).height(e)}}},_activate:function(b){var c=this._findActive(b)[0];if(c===this.active[0]){return}c=c||this.active[0];this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop})},_findActive:function(b){return typeof b==="number"?this.headers.eq(b):a()},_setupEvents:function(c){var b={keydown:"_keydown"};if(c){a.each(c.split(" "),function(e,d){b[d]="_eventHandler"})}this._off(this.headers.add(this.headers.next()));this._on(this.headers,b);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(c){var d,e,l=this.options,g=this.active,h=a(c.currentTarget),j=h[0]===g[0],f=j&&l.collapsible,b=f?a():h.next(),i=g.next(),k={oldHeader:g,oldPanel:i,newHeader:f?a():h,newPanel:b};c.preventDefault();if((j&&!l.collapsible)||(this._trigger("beforeActivate",c,k)===false)){return}l.active=f?false:this.headers.index(h);this.active=j?a():h;this._toggle(k);this._removeClass(g,"ui-accordion-header-active","ui-state-active");if(l.icons){d=g.children(".ui-accordion-header-icon");this._removeClass(d,null,l.icons.activeHeader)._addClass(d,null,l.icons.header)}if(!j){this._removeClass(h,"ui-accordion-header-collapsed")._addClass(h,"ui-accordion-header-active","ui-state-active");if(l.icons){e=h.children(".ui-accordion-header-icon");this._removeClass(e,null,l.icons.header)._addClass(e,null,l.icons.activeHeader)}this._addClass(h.next(),"ui-accordion-content-active")}},_toggle:function(d){var b=d.newPanel,c=this.prevShow.length?this.prevShow:d.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=b;this.prevHide=c;if(this.options.animate){this._animate(b,c,d)}else{c.hide();b.show();this._toggleComplete(d)}c.attr({"aria-hidden":"true"});c.prev().attr({"aria-selected":"false","aria-expanded":"false"});if(b.length&&c.length){c.prev().attr({tabIndex:-1,"aria-expanded":"false"})}else{if(b.length){this.headers.filter(function(){return parseInt(a(this).attr("tabIndex"),10)===0}).attr("tabIndex",-1)}}b.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(b,k,g){var j,i,f,h=this,l=0,e=b.css("box-sizing"),m=b.length&&(!k.length||(b.index()<k.index())),d=this.options.animate||{},n=m&&d.down||d,c=function(){h._toggleComplete(g)};if(typeof n==="number"){f=n}if(typeof n==="string"){i=n}i=i||n.easing||d.easing;f=f||n.duration||d.duration;if(!k.length){return b.animate(this.showProps,f,i,c)}if(!b.length){return k.animate(this.hideProps,f,i,c)}j=b.show().outerHeight();k.animate(this.hideProps,{duration:f,easing:i,step:function(o,p){p.now=Math.round(o)}});b.hide().animate(this.showProps,{duration:f,easing:i,complete:c,step:function(o,p){p.now=Math.round(o);if(p.prop!=="height"){if(e==="content-box"){l+=p.now}}else{if(h.options.heightStyle!=="content"){p.now=Math.round(j-k.outerHeight()-l);l=0}}}})},_toggleComplete:function(d){var b=d.oldPanel,c=b.prev();this._removeClass(b,"ui-accordion-content-active");this._removeClass(c,"ui-accordion-header-active")._addClass(c,"ui-accordion-header-collapsed");if(b.length){b.parent()[0].className=b.parent()[0].className}this._trigger("activate",null,d)}})}));