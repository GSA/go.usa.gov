/*!
 * jQuery UI Tooltip @VERSION
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","../keycode","../position","../unique-id","../version","../widget"],a)}else{a(jQuery)}}(function(a){a.widget("ui.tooltip",{version:"@VERSION",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,track:false,close:null,open:null},_addDescribedBy:function(c,d){var b=(c.attr("aria-describedby")||"").split(/\s+/);b.push(d);c.data("ui-tooltip-id",d).attr("aria-describedby",a.trim(b.join(" ")))},_removeDescribedBy:function(d){var e=d.data("ui-tooltip-id"),c=(d.attr("aria-describedby")||"").split(/\s+/),b=a.inArray(e,c);if(b!==-1){c.splice(b,1)}d.removeData("ui-tooltip-id");c=a.trim(c.join(" "));if(c){d.attr("aria-describedby",c)}else{d.removeAttr("aria-describedby")}},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.liveRegion=a("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this.disabledTitles=a([])},_setOption:function(b,d){var c=this;this._super(b,d);if(b==="content"){a.each(this.tooltips,function(f,e){c._updateContent(e.element)})}},_setOptionDisabled:function(b){this[b?"_disable":"_enable"]()},_disable:function(){var b=this;a.each(this.tooltips,function(e,d){var c=a.Event("blur");c.target=c.currentTarget=d.element[0];b.close(c,true)});this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var c=a(this);if(c.is("[title]")){return c.data("ui-tooltip-title",c.attr("title")).removeAttr("title")}}))},_enable:function(){this.disabledTitles.each(function(){var b=a(this);if(b.data("ui-tooltip-title")){b.attr("title",b.data("ui-tooltip-title"))}});this.disabledTitles=a([])},open:function(c){var b=this,d=a(c?c.target:this.element).closest(this.options.items);if(!d.length||d.data("ui-tooltip-id")){return}if(d.attr("title")){d.data("ui-tooltip-title",d.attr("title"))}d.data("ui-tooltip-open",true);if(c&&c.type==="mouseover"){d.parents().each(function(){var f=a(this),e;if(f.data("ui-tooltip-open")){e=a.Event("blur");e.target=e.currentTarget=this;b.close(e,true)}if(f.attr("title")){f.uniqueId();b.parents[this.id]={element:this,title:f.attr("title")};f.attr("title","")}})}this._registerCloseHandlers(c,d);this._updateContent(d,c)},_updateContent:function(g,f){var e,b=this.options.content,d=this,c=f?f.type:null;if(typeof b==="string"||b.nodeType||b.jquery){return this._open(f,g,b)}e=b.call(g[0],function(h){d._delay(function(){if(!g.data("ui-tooltip-open")){return}if(f){f.type=c}this._open(f,g,h)})});if(e){this._open(f,g,e)}},_open:function(c,f,g){var b,j,i,d,h=a.extend({},this.options.position);if(!g){return}b=this._find(f);if(b){b.tooltip.find(".ui-tooltip-content").html(g);return}if(f.is("[title]")){if(c&&c.type==="mouseover"){f.attr("title","")}else{f.removeAttr("title")}}b=this._tooltip(f);j=b.tooltip;this._addDescribedBy(f,j.attr("id"));j.find(".ui-tooltip-content").html(g);this.liveRegion.children().hide();d=a("<div>").html(j.find(".ui-tooltip-content").html());d.removeAttr("name").find("[name]").removeAttr("name");d.removeAttr("id").find("[id]").removeAttr("id");d.appendTo(this.liveRegion);function e(k){h.of=k;if(j.is(":hidden")){return}j.position(h)}if(this.options.track&&c&&/^mouse/.test(c.type)){this._on(this.document,{mousemove:e});e(c)}else{j.position(a.extend({of:f},this.options.position))}j.hide();this._show(j,this.options.show);if(this.options.track&&this.options.show&&this.options.show.delay){i=this.delayedShow=setInterval(function(){if(j.is(":visible")){e(h.of);clearInterval(i)}},a.fx.interval)}this._trigger("open",c,{tooltip:j})},_registerCloseHandlers:function(c,d){var b={keyup:function(e){if(e.keyCode===a.ui.keyCode.ESCAPE){var f=a.Event(e);f.currentTarget=d[0];this.close(f,true)}}};if(d[0]!==this.element[0]){b.remove=function(){this._removeTooltip(this._find(d).tooltip)}}if(!c||c.type==="mouseover"){b.mouseleave="close"}if(!c||c.type==="focusin"){b.focusout="close"}this._on(true,d,b)},close:function(c){var e,b=this,f=a(c?c.currentTarget:this.element),d=this._find(f);if(!d){f.removeData("ui-tooltip-open");return}e=d.tooltip;if(d.closing){return}clearInterval(this.delayedShow);if(f.data("ui-tooltip-title")&&!f.attr("title")){f.attr("title",f.data("ui-tooltip-title"))}this._removeDescribedBy(f);d.hiding=true;e.stop(true);this._hide(e,this.options.hide,function(){b._removeTooltip(a(this))});f.removeData("ui-tooltip-open");this._off(f,"mouseleave focusout keyup");if(f[0]!==this.element[0]){this._off(f,"remove")}this._off(this.document,"mousemove");if(c&&c.type==="mouseleave"){a.each(this.parents,function(h,g){a(g.element).attr("title",g.title);delete b.parents[h]})}d.closing=true;this._trigger("close",c,{tooltip:e});if(!d.hiding){d.closing=false}},_tooltip:function(b){var d=a("<div>").attr("role","tooltip"),c=a("<div>").appendTo(d),e=d.uniqueId().attr("id");this._addClass(c,"ui-tooltip-content");this._addClass(d,"ui-tooltip","ui-widget ui-widget-content");d.appendTo(this._appendTo(b));return this.tooltips[e]={element:b,tooltip:d}},_find:function(b){var c=b.data("ui-tooltip-id");return c?this.tooltips[c]:null},_removeTooltip:function(b){b.remove();delete this.tooltips[b.attr("id")]},_appendTo:function(c){var b=c.closest(".ui-front, dialog");if(!b.length){b=this.document[0].body}return b},_destroy:function(){var b=this;a.each(this.tooltips,function(f,e){var d=a.Event("blur"),c=e.element;d.target=d.currentTarget=c[0];b.close(d,true);a("#"+f).remove();if(c.data("ui-tooltip-title")){if(!c.attr("title")){c.attr("title",c.data("ui-tooltip-title"))}c.removeData("ui-tooltip-title")}});this.liveRegion.remove()}});if(a.uiBackCompat!==false){a.widget("ui.tooltip",a.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var b=this._superApply(arguments);if(this.options.tooltipClass){b.tooltip.addClass(this.options.tooltipClass)}return b}})}return a.ui.tooltip}));